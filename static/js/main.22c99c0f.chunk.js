(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(t,n,e){t.exports=e(39)},34:function(t,n,e){},39:function(t,n,e){"use strict";e.r(n);var r=e(0),c=e.n(r),a=e(26),o=e.n(a),i=(e(34),e(3)),u=e(4),f=e(52),l=e(7),b=e.n(l),g=l.T.List(l.T.Record({number:l.T.Number()})),d=b()({MoveLeft:[g],MoveRight:[g],MoveUp:[g],MoveDown:[g]}),h=e(11),j=e(27),v=e(53),O=e(42),m=b()(["Left","Right","Up","Down","Default"]),s=Object(v.a)([[function(t){var n=t.xVelocity;t.down;return-n>0},function(){return m.Left()}],[function(t){var n=t.xVelocity;t.down;return n>0},function(){return m.Right()}],[function(t){var n=t.yVelocity;t.down;return-n>0},function(){return m.Up()}],[function(t){var n=t.yVelocity;t.down;return n>0},function(){return m.Down()}],[O.a,function(){return m.Default()}]]),w=function(t){var n=Object(j.a)({transient:!0,onAction:function(n){return!n.down&&t({direction:s(Object(h.a)({},n,{threshold:0}))})}});return Object(i.a)(n,1)[0]},p=e(40),y=Object(v.a)([[Object(p.a)(37),function(){return m.Left()}],[Object(p.a)(39),function(){return m.Right()}],[Object(p.a)(38),function(){return m.Up()}],[Object(p.a)(40),function(){return m.Down()}],[O.a,function(){return m.Default()}]]),x=function(t){return Object(r.useEffect)(function(){var n=function(n){var e=y(n.keyCode);m.match(e,{Default:function(){},_:function(){return t({direction:e})}})};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}},[]),null},E=function(t){return x(t),w(t)},M={int:function(t,n){return Math.floor(Math.random()*(n-t)+t)},item:function(t){return t[M.int(0,t.length)]}},A=M,R=e(21),F=e(28),k=e(54),D=e(50),z=e(43),L=e(44),N=e(45),J=e(46),U=e(51),S=e(49),T=e(47),C=b()({Forward:[],Reverse:[]});C.concatArray=function(t,n){return C.cata({Forward:function(){return t.concat(n)},Reverse:function(){return n.concat(t)}})};var V,B=C,P=function(t){return{number:t}},W=function(){return P(0)},_=Object(k.a)(P,A.item),I=function(t){return 0===t.number},$=Object(F.createPipe)("map"),q=function(t,n,e){return Object(k.a)($(function(t,n){return function(e,r){return B.match(n,{Forward:function(){return I(Object(J.a)(e))?Object(R.a)(e.slice(0,e.length-1)).concat([t[r]]):e},Reverse:function(){return I(Object(z.a)(e))?[t[r]].concat(Object(R.a)(e.slice(1,e.length))):e}})}}(e,n)),Object(u.a)(function(t,n,e){return function(r){var c=t-r.length;if(c<=0)return r;var a=Object(f.a)(0,c).map(e);return B.concatArray(r,a)(n)}}(t,n,W)),Object(u.a)(function(t){return Object(k.a)(Object(u.a)(P),Object(D.a)(function(n){var e=(Object(z.a)(n)||{}).number,r=void 0===e?0:e,c=Object(f.a)(0,Math.floor(n.length/2)).map(function(t){return 2*r});return n.length%2?B.concatArray(c,[r])(t):c}),Object(L.a)(Object(N.a)("number")))}(n)),Object(u.a)(Object(U.a)(Object(S.a)(I))))},G=function(t,n,e){return Object(k.a)(T.a,q(t,n,e),T.a)},H=e(9),K={grid:(V=4,Object(f.a)(0,V).map(function(){return Object(f.a)(0,V).map(function(){return _([0,0,0,0,0,1,2,4])})}))},Q=d.cata({MoveLeft:function(t){return function(n){var e=n.grid,r=Object(H.a)(n,["grid"]);return Object(h.a)({},r,{grid:q(e.length,B.Forward(),t)(e)})}},MoveRight:function(t){return function(n){var e=n.grid,r=Object(H.a)(n,["grid"]);return Object(h.a)({},r,{grid:q(e.length,B.Reverse(),t)(e)})}},MoveUp:function(t){return function(n){var e=n.grid,r=Object(H.a)(n,["grid"]);return Object(h.a)({},r,{grid:G(e.length,B.Forward(),t)(e)})}},MoveDown:function(t){return function(n){var e=n.grid,r=Object(H.a)(n,["grid"]);return Object(h.a)({},r,{grid:G(e.length,B.Reverse(),t)(e)})}},_:function(){return function(t){t.grid;return Object(H.a)(t,["grid"])}}}),X=function(t){var n=t.children;return c.a.createElement(c.a.Fragment,null,n)},Y=e(48),Z=b()({Just:["value"],Nothing:[]}),tt=Object(Y.a)(function(t,n){return Z.match(n,{Just:function(n){return Z.Just(t(n))},Nothing:function(){return n}})}),nt=(Object(Y.a)(function(t,n,e){return Z.match(e,{Just:function(n){return t(n)},Nothing:function(){return n}})}),Z),et=function(){return{ctx:arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt.Nothing(),width:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,height:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}},rt=Object(r.createContext)(et()),ct=e(41),at=function(t){return t?nt.Just(t.getContext("2d")):nt.Nothing()},ot=function(t){return t.save(),t.beginPath(),t},it=function(t){return t.setTransform(1,0,0,1,0,0),t.restore(),t},ut=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return ct.a.apply(void 0,[tt(ot)].concat(Object(R.a)(n.map(function(t){return tt(t)})),[tt(it)]))},ft=Object(Y.a)(function(t,n){var e="".concat(n.font).split(" "),r=Object(i.a)(e,1)[0];return n.font="".concat(r," ").concat(t),n}),lt=Object(Y.a)(function(t,n){var e="".concat(n.font).split(" "),r=Object(i.a)(e,2)[1];return n.font="".concat(t," ").concat(r),n}),bt=Object(Y.a)(function(t,n){return n.fillStyle=t,n}),gt=Object(Y.a)(function(t,n,e){return e.textAlign=t,e.textBaseline=n,e}),dt=Object(Y.a)(function(t,n){var e=t.fontFamily,r=t.fontSize,c=t.color,a=t.textAlign,o=t.verticalAlign;return Object(ct.a)(bt(c),lt(r),ft(e),gt(a,o))(n)}),ht=Object(Y.a)(function(t,n,e,r,c,a){return a.translate(r/2,c/2),a.fillText(t,n,e),a.setTransform(1,0,0,1,0,0),a}),jt=Object(Y.a)(function(t,n,e,r,c){return c.rect(t,n,e,r),c.fill(),c}),vt=c.a.memo(function(t){var n=t.width,e=t.height,a=t.children,o=Object(H.a)(t,["width","height","children"]),u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=Object(r.useState)(at(t)),e=Object(i.a)(n,2),c=e[0],a=e[1],o=Object(r.useRef)();return Object(r.useEffect)(function(){a(at(o.current))},[o]),[o,c]}(),f=Object(i.a)(u,2),l=f[0],b=f[1];return c.a.createElement("canvas",Object.assign({width:n,height:e},o,{ref:l}),c.a.createElement(rt.Provider,{value:et(b,n,e)},a))}),Ot=c.a.memo(function(t){var n=Object(r.useContext)(rt).ctx;return function(t){var n=t.width,e=t.height,r=t.x,c=t.y,a=t.fill;return ut(bt(a),jt(r,c,n,e))}(t)(n),null}),mt=c.a.memo(function(t){var n=Object(r.useContext)(rt).ctx;return function(t){var n=t.text,e=t.width,r=t.height,c=t.x,a=t.y,o=t.color,i=t.fontFamily,u=t.fontSize,f=t.textAlign,l=void 0===f?"center":f,b=t.verticalAlign;return ut(dt({color:o,fontFamily:i,fontSize:u,textAlign:l,verticalAlign:void 0===b?"middle":b}),ht(n,c,a,e,r))}(t)(n),null}),st=vt,wt=function(t){var n=t.row,e=t.col,r=t.size,c=t.margin;return{x:e*(r+c)+c,y:n*(r+c)+c}},pt=function(t){var n=t.render,e=t.row,r=void 0===e?0:e,a=t.col,o=void 0===a?0:a,i=t.margin,u=t.size,f=t.background;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ot,Object.assign({},wt({row:r,col:o,margin:i,size:u}),{height:u,width:u,fill:f})),n(Object(h.a)({},wt({row:r,col:o,margin:i,size:u}),{size:u,margin:i})))},yt=function(t){var n=t.grid,e=Object(H.a)(t,["grid"]);return c.a.createElement(c.a.Fragment,null,n.map(function(t,n){return c.a.createElement(X,{key:n},t.map(function(t,r){return c.a.createElement(pt,Object.assign({key:r,row:n,col:r,render:t},e))}))}))},xt=function(t){var n,e=t.block,r=t.size,a={x:t.x,y:t.y,width:r,height:r};return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ot,Object.assign({},a,{fill:(n=e.number,0===n?"rgb(240, 240, 240)":"hsl(".concat(["".concat(150+Math.log2(n)%10*10),"50%","58%"].join(","),")"))})),!I(e)&&c.a.createElement(mt,Object.assign({},a,{text:e.number,color:"#333",fontSize:25,fontFamily:"Arial"})))},Et=Object(u.a)(Object(u.a)(function(t){return function(n){return c.a.createElement(xt,Object.assign({},n,{block:t}))}})),Mt=c.a.memo(function(){var t,n,e=(t=Q,n=K,Object(r.useReducer)(function(n,e){return t(e)(n)},n)),a=Object(i.a)(e,2),o=a[0],u=a[1],l=E(function(t){var n=t.direction,e=function(){var t=Object(f.a)(0,4).map(W);return t[A.int(0,4)]=_([0,1,2,4]),t}();m.match(n,{Default:function(){},Left:function(){return u(d.MoveLeft(e))},Right:function(){return u(d.MoveRight(e))},Up:function(){return u(d.MoveUp(e))},Down:function(){return u(d.MoveDown(e))}})});return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},"2048"),c.a.createElement("div",null,c.a.createElement(st,Object.assign({width:450,height:450},l),c.a.createElement(yt,{grid:Et(o.grid),size:100,margin:10}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(Mt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[29,2,1]]]);
//# sourceMappingURL=main.22c99c0f.chunk.js.map