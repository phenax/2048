(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(t,n,e){t.exports=e(39)},34:function(t,n,e){},39:function(t,n,e){"use strict";e.r(n);var r=e(0),c=e.n(r),i=e(26),a=e.n(i),o=(e(34),e(4)),u=e(53),f=e(5),l=e.n(f),g=f.T.List(f.T.Record({number:f.T.Number()})),b=l()({MoveLeft:[g],MoveRight:[g],MoveUp:[g],MoveDown:[g]}),d=e(10),h=e(27),v=e(52),m=e(42),j=l()(["Left","Right","Up","Down","Default"]),O=Object(v.a)([[function(t){var n=t.xVelocity;t.down;return-n>0},function(){return j.Left()}],[function(t){var n=t.xVelocity;t.down;return n>0},function(){return j.Right()}],[function(t){var n=t.yVelocity;t.down;return-n>0},function(){return j.Up()}],[function(t){var n=t.yVelocity;t.down;return n>0},function(){return j.Down()}],[m.a,function(){return j.Default()}]]),s=function(t){var n=Object(h.a)({transient:!0,onAction:function(n){return!n.down&&t({direction:O(Object(d.a)({},n,{threshold:0}))})}});return Object(o.a)(n,1)[0]},w=e(40),p=Object(v.a)([[Object(w.a)(37),function(){return j.Left()}],[Object(w.a)(39),function(){return j.Right()}],[Object(w.a)(38),function(){return j.Up()}],[Object(w.a)(40),function(){return j.Down()}],[m.a,function(){return j.Default()}]]),y=function(t){return Object(r.useEffect)(function(){var n=function(n){var e=p(n.keyCode);j.match(e,{Default:function(){},_:function(){return t({direction:e})}})};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}},[]),null},x=function(t){return y(t),s(t)},E={int:function(t,n){return Math.floor(Math.random()*(n-t)+t)},item:function(t){return t[E.int(0,t.length)]}},M=E,A=e(20),R=e(28),k=e(51),F=e(43),D=e(44),z=e(19),L=e(49),N=e(45),J=e(46),U=e(50),S=e(47),T=l()({Forward:[],Reverse:[]});T.concatArray=function(t,n){return T.cata({Forward:function(){return t.concat(n)},Reverse:function(){return n.concat(t)}})};var C,V=T,B=function(t){return{number:t}},P=function(){return B(0)},W=Object(R.createPipe)("map"),_=function(t){return t.number},I=Object(k.a)(_,F.a),$=Object(k.a)(_,D.a),q=function(t,n,e){return Object(k.a)(W(function(t,n){return function(e,r){return V.match(n,{Forward:function(){return 0===$(e)?Object(A.a)(e.slice(0,e.length-1)).concat([t[r]]):e},Reverse:function(){return 0===I(e)?[t[r]].concat(Object(A.a)(e.slice(1,e.length))):e}})}}(e,n)),Object(z.a)(function(t,n,e){return function(r){var c=t-r.length;if(0===c)return r;var i=Object(u.a)(0,c).map(e);return V.concatArray(r,i)(n)}}(t,n,P)),Object(z.a)(function(t){return Object(k.a)(Object(z.a)(B),Object(L.a)(function(n){var e=Object(u.a)(0,Math.floor(n.length/2)).map(function(t){return 2*I(n)});return n.length%2?V.concatArray(e,[I(n)])(t):e}),Object(N.a)(Object(J.a)("number")))}(n)),Object(z.a)(Object(U.a)(function(t){return 0!==_(t)})))},G=function(t,n,e){return Object(k.a)(S.a,q(t,n,e),S.a)},H=e(7),K=b.cata({MoveLeft:function(t){return function(n){var e=n.grid,r=Object(H.a)(n,["grid"]);return Object(d.a)({},r,{grid:q(e.length,V.Forward(),t)(e)})}},MoveRight:function(t){return function(n){var e=n.grid,r=Object(H.a)(n,["grid"]);return Object(d.a)({},r,{grid:q(e.length,V.Reverse(),t)(e)})}},MoveUp:function(t){return function(n){var e=n.grid,r=Object(H.a)(n,["grid"]);return Object(d.a)({},r,{grid:G(e.length,V.Forward(),t)(e)})}},MoveDown:function(t){return function(n){var e=n.grid,r=Object(H.a)(n,["grid"]);return Object(d.a)({},r,{grid:G(e.length,V.Reverse(),t)(e)})}},_:function(){return function(t){t.grid;return Object(H.a)(t,["grid"])}}}),Q=function(t){var n=t.children;return c.a.createElement(c.a.Fragment,null,n)},X=e(48),Y=l()({Just:["value"],Nothing:[]}),Z=Object(X.a)(function(t,n){return Y.match(n,{Just:function(n){return Y.Just(t(n))},Nothing:function(){return n}})}),tt=(Object(X.a)(function(t,n,e){return Y.match(e,{Just:function(n){return t(n)},Nothing:function(){return n}})}),Y),nt=function(){return{ctx:arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt.Nothing(),width:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,height:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}},et=Object(r.createContext)(nt()),rt=e(41),ct=function(t){return t?tt.Just(t.getContext("2d")):tt.Nothing()},it=function(t){return t.save(),t.beginPath(),t},at=function(t){return t.setTransform(1,0,0,1,0,0),t.restore(),t},ot=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return rt.a.apply(void 0,[Z(it)].concat(Object(A.a)(n.map(function(t){return Z(t)})),[Z(at)]))},ut=Object(X.a)(function(t,n){var e="".concat(n.font).split(" "),r=Object(o.a)(e,1)[0];return n.font="".concat(r," ").concat(t),n}),ft=Object(X.a)(function(t,n){var e="".concat(n.font).split(" "),r=Object(o.a)(e,2)[1];return n.font="".concat(t," ").concat(r),n}),lt=Object(X.a)(function(t,n){return n.fillStyle=t,n}),gt=Object(X.a)(function(t,n,e){return e.textAlign=t,e.textBaseline=n,e}),bt=Object(X.a)(function(t,n){var e=t.fontFamily,r=t.fontSize,c=t.color,i=t.textAlign,a=t.verticalAlign;return Object(rt.a)(lt(c),ft(r),ut(e),gt(i,a))(n)}),dt=Object(X.a)(function(t,n,e,r,c,i){return i.translate(r/2,c/2),i.fillText(t,n,e),i.setTransform(1,0,0,1,0,0),i}),ht=Object(X.a)(function(t,n,e,r,c){return c.rect(t,n,e,r),c.fill(),c}),vt=Object(r.memo)(function(t){var n=t.width,e=t.height,i=t.children,a=Object(H.a)(t,["width","height","children"]),u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=Object(r.useState)(ct(t)),e=Object(o.a)(n,2),c=e[0],i=e[1],a=Object(r.useRef)();return Object(r.useEffect)(function(){i(ct(a.current))},[a]),[a,c]}(),f=Object(o.a)(u,2),l=f[0],g=f[1];return c.a.createElement("canvas",Object.assign({width:n,height:e},a,{ref:l}),c.a.createElement(et.Provider,{value:nt(g,n,e)},i))}),mt=function(t){var n=Object(r.useContext)(et).ctx;return function(t){var n=t.width,e=t.height,r=t.x,c=t.y,i=t.fill;return ot(lt(i),ht(r,c,n,e))}(t)(n),null},jt=function(t){var n=Object(r.useContext)(et).ctx;return function(t){var n=t.text,e=t.width,r=t.height,c=t.x,i=t.y,a=t.color,o=t.fontFamily,u=t.fontSize,f=t.textAlign,l=void 0===f?"center":f,g=t.verticalAlign;return ot(bt({color:a,fontFamily:o,fontSize:u,textAlign:l,verticalAlign:void 0===g?"middle":g}),dt(n,c,i,e,r))}(t)(n),null},Ot=vt,st=function(t){var n=t.row,e=t.col,r=t.size,c=t.margin;return{x:e*(r+c)+c,y:n*(r+c)+c}},wt=function(t){var n=t.render,e=t.row,r=void 0===e?0:e,i=t.col,a=void 0===i?0:i,o=t.margin,u=t.size,f=t.background;return c.a.createElement(c.a.Fragment,null,c.a.createElement(mt,Object.assign({},st({row:r,col:a,margin:o,size:u}),{height:u,width:u,fill:f})),n(Object(d.a)({},st({row:r,col:a,margin:o,size:u}),{size:u,margin:o})))},pt=function(t){var n=t.grid,e=Object(H.a)(t,["grid"]);return c.a.createElement(c.a.Fragment,null,n.map(function(t,n){return c.a.createElement(Q,{key:n},t.map(function(t,r){return c.a.createElement(wt,Object.assign({key:r,row:n,col:r,render:t},e))}))}))},yt=function(){return B(M.item([0,0,0,0,0,1,2,4]))},xt={grid:(C=4,Object(u.a)(0,C).map(function(){return Object(u.a)(0,C).map(yt)}))},Et=function(t){var n,e=t.block,r=t.size,i=t.x,a=t.y;return c.a.createElement(c.a.Fragment,null,c.a.createElement(mt,{x:i,y:a,width:r,height:r,fill:(n=e.number,0===n?"rgb(240, 240, 240)":"hsl(".concat(["".concat(150+Math.log2(n)%10*10),"60%","58%"].join(","),")"))}),c.a.createElement(jt,{x:i,y:a,width:r,height:r,text:e.number,fontSize:16,fontFamily:"Arial"}))},Mt=c.a.memo(function(){var t,n,e=(t=K,n=xt,Object(r.useReducer)(function(n,e){return t(e)(n)},n)),i=Object(o.a)(e,2),a=i[0],f=i[1],l=x(function(t){var n=t.direction,e=Object(u.a)(0,4).map(function(){return B(0)});e[M.int(0,4)]=B(M.item([0,1,2,4])),j.match(n,{Default:function(){},Left:function(){return f(b.MoveLeft(e))},Right:function(){return f(b.MoveRight(e))},Up:function(){return f(b.MoveUp(e))},Down:function(){return f(b.MoveDown(e))}})}),g=a.grid.map(function(t){return t.map(function(t){return function(n){return c.a.createElement(Et,Object.assign({},n,{block:t}))}})});return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},"2048"),c.a.createElement("div",null,c.a.createElement(Ot,Object.assign({width:450,height:450},l),c.a.createElement(pt,{grid:g,size:100,margin:10,background:"#eee"}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(c.a.createElement(Mt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[29,2,1]]]);
//# sourceMappingURL=main.542228a2.chunk.js.map